### æœ‰å†™è¿‡åŸç”Ÿçš„è‡ªå®šä¹‰äº‹ä»¶å—

**åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶**

åŸç”Ÿè‡ªå®šä¹‰äº‹ä»¶æœ‰ä¸‰ç§å†™æ³•ï¼š

1. ä½¿ç”¨`Event`

```javascript
let myEvent = new Event('event_name');
```

2. ä½¿ç”¨`customEvent` ï¼ˆå¯ä»¥ä¼ å‚æ•°ï¼‰

```javascript
let myEvent = new CustomEvent('event_name', {
 detail: {
  // å°†éœ€è¦ä¼ é€’çš„å‚æ•°æ”¾åˆ°è¿™é‡Œ
  // å¯ä»¥åœ¨ç›‘å¬çš„å›è°ƒå‡½æ•°ä¸­è·å–åˆ°ï¼ševent.detail
 }
})
```

3. ä½¿ç”¨`document.createEvent('CustomEvent')å’ŒinitCustomEvent()`

```javascript
let myEvent = document.createEvent('CustomEvent');// æ³¨æ„è¿™é‡Œæ˜¯ä¸º'CustomEvent'
myEvent.initEvent(
 // 1. event_name: äº‹ä»¶åç§°
 // 2. canBubble: æ˜¯å¦å†’æ³¡
 // 3. cancelable: æ˜¯å¦å¯ä»¥å–æ¶ˆé»˜è®¤è¡Œä¸º
)
```

- `createEvent`ï¼šåˆ›å»ºä¸€ä¸ªäº‹ä»¶
- `initEvent`ï¼šåˆå§‹åŒ–ä¸€ä¸ªäº‹ä»¶

å¯ä»¥çœ‹åˆ°ï¼Œ`initEvent`å¯ä»¥æŒ‡å®š3ä¸ªå‚æ•°ã€‚

ï¼ˆæœ‰äº›æ–‡ç« ä¸­ä¼šè¯´è¿˜æœ‰ç¬¬å››ä¸ªå‚æ•°`detail`ï¼Œä½†æ˜¯æˆ‘æŸ¥çœ‹äº†`W3C`ä¸Šå¹¶æ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œè€Œä¸”å®è·µäº†ä¸€ä¸‹ä¹Ÿæ²¡æœ‰æ•ˆæœï¼‰

**äº‹ä»¶çš„ç›‘å¬**

è‡ªå®šä¹‰äº‹ä»¶çš„ç›‘å¬å…¶å®å’Œæ™®é€šäº‹ä»¶çš„ä¸€æ ·ï¼Œä½¿ç”¨`addEventListener`æ¥ç›‘å¬ï¼š

```javascript
button.addEventListener('event_name', function (e) {})
```

**äº‹ä»¶çš„è§¦å‘**

è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ä½¿ç”¨`dispatchEvent(myEvent)`ã€‚

æ³¨æ„âš ï¸ï¼Œè¿™é‡Œçš„å‚æ•°æ˜¯è¦è‡ªå®šä¹‰äº‹ä»¶çš„å¯¹è±¡(ä¹Ÿå°±æ˜¯`myEvent`)ï¼Œè€Œä¸æ˜¯è‡ªå®šä¹‰äº‹ä»¶çš„åç§°(`'myEvent'`)

**æ¡ˆä¾‹**

æ¥çœ‹ä¸ªæ¡ˆä¾‹å§ï¼š

```javascript
// 1.
// let myEvent = new Event('myEvent');
// 2.
// let myEvent = new CustomEvent('myEvent', {
//   detail: {
//     name: 'lindaidai'
//   }
// })
// 3.
let myEvent = document.createEvent('CustomEvent');
myEvent.initEvent('myEvent', true, true)

let btn = document.getElementsByTagName('button')[0]
btn.addEventListener('myEvent', function (e) {
  console.log(e)
  console.log(e.detail)
})
setTimeout(() => {
  btn.dispatchEvent(myEvent)
}, 2000)
```

### addEventListenerå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°

ç¬¬ä¸‰ä¸ªå‚æ•°æ¶‰åŠåˆ°å†’æ³¡å’Œæ•è·ï¼Œæ˜¯`true`æ—¶ä¸ºæ•è·ï¼Œæ˜¯`false`åˆ™ä¸ºå†’æ³¡

### å†’æ³¡å’Œæ•è·çš„å…·ä½“è¿‡ç¨‹

å†’æ³¡æŒ‡çš„æ˜¯ï¼šå½“ç»™æŸä¸ªç›®æ ‡å…ƒç´ ç»‘å®šäº†äº‹ä»¶ä¹‹åï¼Œè¿™ä¸ªäº‹ä»¶ä¼šä¾æ¬¡åœ¨å®ƒçš„çˆ¶çº§å…ƒç´ ä¸­è¢«è§¦å‘(å½“ç„¶å‰ææ˜¯è¿™ä¸ªçˆ¶çº§å…ƒç´ ä¹Ÿæœ‰è¿™ä¸ªåŒåç§°çš„äº‹ä»¶ï¼Œæ¯”å¦‚å­å…ƒç´ å’Œçˆ¶å…ƒç´ éƒ½ç»‘å®šäº†`click`äº‹ä»¶å°±è§¦å‘çˆ¶å…ƒç´ çš„`click`)ã€‚

æ•è·åˆ™æ˜¯ä»ä¸Šå±‚å‘ä¸‹å±‚ä¼ é€’ï¼Œä¸å†’æ³¡ç›¸åã€‚

ï¼ˆéå¸¸å¥½è®°ï¼Œä½ å°±æƒ³æƒ³æ°´åº•æœ‰ä¸€ä¸ªæ³¡æ³¡ä»ä¸‹é¢å¾€ä¸Šä¼ çš„ï¼Œæ‰€ä»¥æ˜¯å†’æ³¡ï¼‰

æ¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š

```html
<!-- ä¼šä¾æ¬¡æ‰§è¡Œ button li ul -->
<ul onclick="alert('ul')">
  <li onclick="alert('li')">
    <button onclick="alert('button')">ç‚¹å‡»</button>
  </li>
</ul>
```

å†’æ³¡ç»“æœï¼š`button > li > ul`

æ•è·ç»“æœï¼š`ul > li > button`

### å¦‚ä½•é˜»æ­¢å†’æ³¡å’Œé»˜è®¤äº‹ä»¶(å…¼å®¹å†™æ³•)

é˜»æ­¢å†’æ³¡ï¼š

```javascript
function stopBubble (e) { // é˜»æ­¢å†’æ³¡
  if (e && e.stopPropagation) {
    e.stopPropagation();
  } else {
    // å…¼å®¹ IE
    window.event.cancelBubble = true;
  }
}
function stopDefault (e) { // é˜»æ­¢é»˜è®¤äº‹ä»¶
  if (e && e.preventDefault) {
    e.preventDefault();
  } else {
    // å…¼å®¹ IE
    window.event.returnValue = false;
    return false;
  }
}
```

### æ‹–æ‹½æœ‰å“ªäº›çŸ¥è¯†ç‚¹

1. å¯ä»¥é€šè¿‡ç»™æ ‡ç­¾è®¾ç½®`draggable`å±æ€§æ¥å®ç°å…ƒç´ çš„æ‹–æ‹½ï¼Œ`imgå’Œaæ ‡ç­¾`é»˜è®¤æ˜¯å¯ä»¥æ‹–æ‹½çš„
2. æ‹–æ‹½è€…èº«ä¸Šçš„ä¸‰ä¸ªäº‹ä»¶ï¼š`ondragstart`ã€`ondrag`ã€`ondragend`
3. æ‹–æ‹½è¦æ”¾åˆ°çš„å…ƒç´ ï¼š`ondragenter`ã€`ondragover`ã€`ondragleave`ã€`ondrap`

### offsetã€scrollã€clientçš„åŒºåˆ«

**client**:

oEvent.clientXæ˜¯æŒ‡é¼ æ ‡åˆ°å¯è§†åŒºå·¦è¾¹æ¡†çš„è·ç¦»ã€‚

oEvent.clientYæ˜¯æŒ‡é¼ æ ‡åˆ°å¯è§†åŒºä¸Šè¾¹æ¡†çš„è·ç¦»ã€‚

clientWidthæ˜¯æŒ‡å¯è§†åŒºçš„å®½åº¦ã€‚

clientHeightæ˜¯æŒ‡å¯è§†åŒºçš„é«˜åº¦ã€‚

clientLeftè·å–å·¦è¾¹æ¡†çš„å®½åº¦ã€‚

clientTopè·å–ä¸Šè¾¹æ¡†çš„å®½åº¦ã€‚

**offset**:

offsetWidthæ˜¯æŒ‡divçš„å®½åº¦ï¼ˆåŒ…æ‹¬divçš„è¾¹æ¡†ï¼‰

offsetHeightæ˜¯æŒ‡divçš„é«˜åº¦ï¼ˆåŒ…æ‹¬divçš„è¾¹æ¡†ï¼‰

offsetLeftæ˜¯æŒ‡divåˆ°æ•´ä¸ªé¡µé¢å·¦è¾¹æ¡†çš„è·ç¦»ï¼ˆä¸åŒ…æ‹¬divçš„è¾¹æ¡†ï¼‰

offsetTopæ˜¯æŒ‡divåˆ°æ•´ä¸ªé¡µé¢ä¸Šè¾¹æ¡†çš„è·ç¦»ï¼ˆä¸åŒ…æ‹¬divçš„è¾¹æ¡†ï¼‰

**scroll**:

scrollTopæ˜¯æŒ‡å¯è§†åŒºé¡¶éƒ¨è¾¹æ¡†ä¸æ•´ä¸ªé¡µé¢ä¸Šéƒ¨è¾¹æ¡†çš„çœ‹ä¸åˆ°çš„åŒºåŸŸã€‚

scrollLeftæ˜¯æŒ‡å¯è§†åŒºå·¦è¾¹è¾¹æ¡†ä¸æ•´ä¸ªé¡µé¢å·¦è¾¹è¾¹æ¡†çš„çœ‹ä¸åˆ°çš„åŒºåŸŸã€‚

scrollWidthæ˜¯æŒ‡å·¦è¾¹çœ‹ä¸åˆ°çš„åŒºåŸŸåŠ å¯è§†åŒºåŠ å³è¾¹çœ‹ä¸åˆ°çš„åŒºåŸŸå³æ•´ä¸ªé¡µé¢çš„å®½åº¦ï¼ˆåŒ…æ‹¬è¾¹æ¡†ï¼‰

scrollHeightæ˜¯æŒ‡ä¸Šè¾¹çœ‹ä¸åˆ°çš„åŒºåŸŸåŠ å¯è§†åŒºåŠ å³è¾¹çœ‹ä¸åˆ°çš„åŒºåŸŸå³æ•´ä¸ªé¡µé¢çš„é«˜åº¦ï¼ˆåŒ…æ‹¬è¾¹æ¡†ï¼‰

### CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§

- !import
- å†…è” 1000
- ID 100
- ç±»é€‰æ‹©å™¨/ä¼ªç±»é€‰æ‹©å™¨/å±æ€§é€‰æ‹©å™¨ 10
- å…ƒç´ é€‰æ‹©å™¨/å…³ç³»é€‰æ‹©å™¨/ä¼ªå…ƒç´ é€‰æ‹©å™¨ 1
- é€šé…ç¬¦ *
- ç»§æ‰¿
- åŸå§‹

### CSS3æ–°ç‰¹æ€§

- transitionï¼šè¿‡æ¸¡
- transform: æ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œ
- animation: åŠ¨ç”»
- gradient: æ¸å˜
- box-shadow: é˜´å½±
- border-radius: åœ†è§’
- word-break: normal|break-all|keep-all; æ–‡å­—æ¢è¡Œ(é»˜è®¤è§„åˆ™|å•è¯ä¹Ÿå¯ä»¥æ¢è¡Œ|åªåœ¨åŠè§’ç©ºæ ¼æˆ–è¿å­—ç¬¦æ¢è¡Œ)
- text-overflow: æ–‡å­—è¶…å‡ºéƒ¨åˆ†å¤„ç†
- text-shadow: æ°´å¹³é˜´å½±ï¼Œå‚ç›´é˜´å½±ï¼Œæ¨¡ç³Šçš„è·ç¦»ï¼Œä»¥åŠé˜´å½±çš„é¢œè‰²ã€‚
- box-sizing: content-box|border-box ç›’æ¨¡å‹
- åª’ä½“æŸ¥è¯¢ `@media screen and (max-width: 960px) {}`è¿˜æœ‰æ‰“å°`print`

### æ–‡å­—å•è¶…å‡ºæ˜¾ç¤ºçœç•¥å·

```css
div {
 width: 200px;
 overflow: hidden;
 white-space: nowrap;
 text-overflow: ellipsis;
}
```

### æ–‡å­—å¤šè¡Œè¶…å‡ºæ˜¾ç¤ºçœç•¥å·

```css
div {
 width: 200px;
 display: -webkit-box;
 -webkit-box-orient: vertical;
 -webkit-line-clamp: 3;
 overflow: hidden;
}
```

è¯¥æ–¹æ³•é€‚ç”¨äºWebKitæµè§ˆå™¨åŠç§»åŠ¨ç«¯ã€‚

**è·¨æµè§ˆå™¨å…¼å®¹æ–¹æ¡ˆï¼š**

```css
p {
    position:relative;
    line-height:1.4em;
    /* 3 times the line-height to show 3 lines */
    height:4.2em;
    overflow:hidden;
}
p::after {
    content:"...";
    font-weight:bold;
    position:absolute;
    bottom:0;
    right:0;
    padding:0 20px 1px 45px;
}
```

### é¡µé¢å˜ç°

```css
body {
 filter: grayscale(100%); /* ç™¾åˆ†æ¯”æˆ–è€… 0~1 */
}
```

### CSSä¸­å¯ç»§æ‰¿çš„å±æ€§

å¯ç»§æ‰¿çš„åªæœ‰ï¼šé¢œè‰²ã€æ–‡å­—ã€å­—ä½“é—´è·ã€è¡Œé«˜å¯¹é½æ–¹å¼ï¼Œåˆ—è¡¨æ ·å¼ã€‚

æ‰€æœ‰å…ƒç´ å¯ç»§æ‰¿ï¼švisibilityå’Œcursorã€‚

å†…è”å…ƒç´ å¯ç»§æ‰¿ï¼šletter-spacingã€word-spacingã€white-spaceã€line-heightã€colorã€fontã€font-familyã€font-sizeã€font-styleã€font-variantã€font-weightã€text-decorationã€text-transformã€directionã€‚

å—çŠ¶ï¼štext-indentå’Œtext-alignã€‚

åˆ—è¡¨å…ƒç´ å¯ç»§æ‰¿ï¼šlist-styleã€list-style-typeã€list-style-positionã€list-style-imageã€‚

### å¦‚ä½•ç”»æ‰‡å½¢ï¼Ÿ

```css
.sector {
  width: 0;
  height: 0;
  border: 100px solid red;
  border-color: red transparent transparent transparent;
  border-radius: 50%;
}
/*æˆ–è€…*/
.sector {
  width: 100px;
  height: 100px;
  border: 100px solid transparent;
  border-top-color: red;
  box-sizing: border-box; /* è¿™æ­¥å¾ˆé‡è¦ */
  border-radius: 50%;
}
```

### å¦‚ä½•ç”»ä¸‰è§’å½¢ï¼Ÿ

```css
.triangle {
  width: 0;
  height: 0;
  border: 100px solid red;
  border-color: red transparent transparent transparent;
}
/*æˆ–è€…*/
.triangle {
  width: 100px;
  height: 100px;
  border: 100px solid transparent;
  border-top-color: red;
  box-sizing: border-box;
}
```

### åœ†ï¼ŸåŠåœ†ï¼Ÿæ¤­åœ†ï¼Ÿ

```css
div {
  width: 100px;
  height: 100px;
  background-color: red;
  margin-top: 20px;
}
.box1 { /* åœ† */
  /* border-radius: 50%; */
  border-radius: 50px;
}
.box2 { /* åŠåœ† */
  height: 50px;
  border-radius: 50px 50px 0 0;
}
.box3 { /* æ¤­åœ† */
  height: 50px;
  border-radius: 50px/25px; /* xè½´/yè½´ */
}
```

### ä»€ä¹ˆæ˜¯BFC

BFCå…¨ç§° Block Formatting Context å³`å—çº§æ ¼å¼ä¸Šä¸‹æ–‡`ï¼Œç®€å•çš„è¯´ï¼ŒBFCæ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œä¸å—å¤–ç•Œå¹²æ‰°æˆ–å¹²æ‰°å¤–ç•Œ

### å¦‚ä½•è§¦å‘BFC

- `float`ä¸ä¸º none
- `overflow`çš„å€¼ä¸ä¸º visible
- `position` ä¸º absolute æˆ– fixed
- `display`çš„å€¼ä¸º inline-block æˆ– table-cell æˆ– table-caption æˆ– grid

### BFCçš„æ¸²æŸ“è§„åˆ™æ˜¯ä»€ä¹ˆ

- BFCæ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œä¸å—å¤–ç•Œå¹²æ‰°æˆ–å¹²æ‰°å¤–ç•Œ
- è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ï¼ˆå³å†…éƒ¨æœ‰æµ®åŠ¨å…ƒç´ æ—¶ä¹Ÿä¸ä¼šå‘ç”Ÿé«˜åº¦å¡Œé™·ï¼‰
- BFCçš„åŒºåŸŸä¸ä¼šä¸floatçš„å…ƒç´ åŒºåŸŸé‡å 
- BFCå†…éƒ¨çš„å…ƒç´ ä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šæ”¾ç½®
- BFCå†…éƒ¨ä¸¤ä¸ªç›¸é‚»å…ƒç´ çš„marginä¼šå‘ç”Ÿé‡å 

### BFCçš„åº”ç”¨åœºæ™¯

- **æ¸…é™¤æµ®åŠ¨**ï¼šBFCå†…éƒ¨çš„æµ®åŠ¨å…ƒç´ ä¼šå‚ä¸é«˜åº¦è®¡ç®—ï¼Œå› æ­¤å¯ç”¨äºæ¸…é™¤æµ®åŠ¨ï¼Œé˜²æ­¢é«˜åº¦å¡Œé™·
- **é¿å…æŸå…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–**ï¼šBFCçš„åŒºåŸŸä¸ä¼šä¸æµ®åŠ¨å…ƒç´ çš„åŒºåŸŸé‡å 
- **é˜»æ­¢å¤–è¾¹è·é‡å **ï¼šå±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”ŸæŠ˜å ï¼Œä¸åŒBFCä¸ä¼šå‘ç”ŸæŠ˜å 

å¯ä»¥å‚è€ƒè¿™é‡Œï¼š

ä½œè€…ï¼šå†™ä»£ç åƒè”¡å¾æŠ»
é“¾æ¥ï¼š<https://juejin.im/post/5e8b261ae51d4546c0382ab4>

### nullå’Œundefinedçš„åŒºåˆ«

- `null`è¡¨ç¤ºä¸€ä¸ª`"æ— "`çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ï¼›è€Œ`undefined`è¡¨ç¤º**æœªå®šä¹‰**ã€‚
- åœ¨è½¬æ¢ä¸ºæ•°å­—æ—¶ç»“æœä¸åŒï¼Œ`Number(null)`ä¸º`0`ï¼Œè€Œ`undefined`ä¸º`NaN`ã€‚

ä½¿ç”¨åœºæ™¯ä¸Šï¼š

`null`ï¼š

- ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡
- ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹

`undefined`:

- å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äºundefined
- è°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”è¯¥æä¾›çš„å‚æ•°æ²¡æœ‰æä¾›ï¼Œè¯¥å‚æ•°ç­‰äºundefined
- å¯¹è±¡æ²¡æœ‰èµ‹å€¼å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸ºundefined
- å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›undefined

### typeofå’Œinstanceofçš„åŒºåˆ«

### typeofä¸ºä»€ä¹ˆå¯¹nullé”™è¯¯çš„æ˜¾ç¤º

è¿™åªæ˜¯ JS å­˜åœ¨çš„ä¸€ä¸ªæ‚ ä¹… Bugã€‚åœ¨ JS çš„æœ€åˆç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œ000 å¼€å¤´ä»£è¡¨æ˜¯å¯¹è±¡ç„¶è€Œ null è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º object ã€‚

### è¯¦ç»†è¯´ä¸‹instanceof

### Array(3)å’ŒArray(3, 4)çš„åŒºåˆ«ï¼Ÿ

```javascript
console.log(Array(3)) // [empty x 3]
console.log(Array(3, 4)) // [3, 4]
```

### è¯·åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100ï¼Œå€¼éƒ½ä¸º1çš„æ•°ç»„

```javascript
new Array(100).fill(1)
```

### è¯·åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100ï¼Œå€¼ä¸ºå¯¹åº”ä¸‹æ ‡çš„æ•°ç»„

```javascript
// coolçš„å†™æ³•ï¼š
[...Array(100).keys()]

// å…¶ä»–æ–¹æ³•ï¼š
Array(100).join(",").split(",").map((v, i) => i)
Array(100).fill().map((v, i) => i)
```

### å®ç° arr[-1] = arr[arr.length - 1]

```javascript
function createArr (...elements) {
  let handler = {
    get (target, key, receiver) { // ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ä¸ä¼ éƒ½å¯ä»¥
      let index = Number(key)
      if (index < 0) {
        index = String(target.length + index)
      }
      return Reflect.get(target, index, receiver)
    }
  }
  let target = []
  target.push(...elements)
  return new Proxy(target, handler)
}
var arr1 = createArr(1, 2, 3)
console.log(arr1[-1]) // 3
console.log(arr1[-2]) // 2
```

### ç”¨æ­£åˆ™å†™ä¸€ä¸ªæ ¹æ®nameè·å–cookieä¸­çš„å€¼çš„æ–¹æ³•

```javascript
function getCookie(name) {
  var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]*)'));
  if (match) return unescape(match[2]);
}
```

1. è·å–é¡µé¢ä¸Šçš„cookieå¯ä»¥ä½¿ç”¨ document.cookie
è¿™é‡Œè·å–åˆ°çš„æ˜¯ç±»ä¼¼äºè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š

```
'username=lindaidai; user-id=12345; user-roles=home, me, setting'
```

å¯ä»¥çœ‹åˆ°è¿™ä¹ˆå‡ ä¸ªä¿¡æ¯ï¼š

- æ¯ä¸€ä¸ªcookieéƒ½æ˜¯ç”± `name=value` è¿™æ ·çš„å½¢å¼å­˜å‚¨çš„
- æ¯ä¸€é¡¹çš„å¼€å¤´å¯èƒ½æ˜¯ä¸€ä¸ªç©ºä¸²`''`(æ¯”å¦‚`username`çš„å¼€å¤´å…¶å®å°±æ˜¯), ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²`' '`ï¼ˆæ¯”å¦‚`user-id`çš„å¼€å¤´å°±æ˜¯ï¼‰
- æ¯ä¸€é¡¹ç”¨`";"`æ¥åŒºåˆ†
- å¦‚æœæŸé¡¹ä¸­æœ‰å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œæ˜¯ç”¨`","`æ¥è¿æ¥çš„(æ¯”å¦‚`user-roles`çš„å€¼)
- æ¯ä¸€é¡¹çš„ç»“å°¾å¯èƒ½æ˜¯æœ‰`";"`çš„(æ¯”å¦‚`username`çš„ç»“å°¾)ï¼Œä¹Ÿå¯èƒ½æ˜¯æ²¡æœ‰çš„(æ¯”å¦‚`user-roles`çš„ç»“å°¾)

2. æ‰€ä»¥æˆ‘ä»¬å°†è¿™é‡Œçš„æ­£åˆ™æ‹†åˆ†ä¸€ä¸‹ï¼š

- `'(^| )'`è¡¨ç¤ºçš„å°±æ˜¯è·å–æ¯ä¸€é¡¹çš„å¼€å¤´ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å¦‚æœ`^`ä¸æ˜¯æ”¾åœ¨`[]`é‡Œçš„è¯å°±æ˜¯è¡¨ç¤ºå¼€å¤´åŒ¹é…ã€‚æ‰€ä»¥è¿™é‡Œ`(^| )`çš„æ„æ€å…¶å®å°±è¢«æ‹†åˆ†ä¸º`(^)`è¡¨ç¤ºçš„åŒ¹é…`username`è¿™ç§æƒ…å†µï¼Œå®ƒå‰é¢ä»€ä¹ˆéƒ½æ²¡æœ‰æ˜¯ä¸€ä¸ªç©ºä¸²(ä½ å¯ä»¥æŠŠ`(^)`ç†è§£ä¸º`^`å®ƒåé¢è¿˜æœ‰ä¸€ä¸ªéšè—çš„`''`)ï¼›è€Œ`|`è¡¨ç¤ºçš„å°±æ˜¯æˆ–è€…æ˜¯ä¸€ä¸ª`" "`(ä¸ºäº†åŒ¹é…`user-id`å¼€å¤´çš„è¿™ç§æƒ…å†µ)
- `+name+`è¿™æ²¡ä»€ä¹ˆå¥½è¯´çš„
- `=([^;]*)`è¿™é‡ŒåŒ¹é…çš„å°±æ˜¯`=`åé¢çš„å€¼äº†ï¼Œæ¯”å¦‚`lindaidai`ï¼›åˆšåˆšè¯´äº†`^`è¦æ˜¯æ”¾åœ¨`[]`é‡Œçš„è¯å°±è¡¨ç¤º`"é™¤äº†^åé¢çš„å†…å®¹éƒ½èƒ½åŒ¹é…"`ï¼Œä¹Ÿå°±æ˜¯éçš„æ„æ€ã€‚æ‰€ä»¥è¿™é‡Œ`([^;]*)`è¡¨ç¤ºçš„æ˜¯é™¤äº†`";"`è¿™ä¸ªå­—ç¬¦ä¸²åˆ«çš„éƒ½åŒ¹é…(`*`åº”è¯¥éƒ½çŸ¥é“ä»€ä¹ˆæ„æ€å§ï¼ŒåŒ¹é…ä»»æ„é¡¹)
- æœ‰çš„å¤§ä½¬ç­‰å·åé¢æ˜¯è¿™æ ·å†™çš„`'=([^;]*)(;|$)'`ï¼Œè€Œæœ€åä¸ºä»€ä¹ˆå¯ä»¥æŠŠ`'(;|$)'`ç»™çœç•¥å‘¢ï¼Ÿå› ä¸ºå…¶å®æœ€åä¸€ä¸ª`cookie`é¡¹æ˜¯æ²¡æœ‰`';'`çš„ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åˆå¹¶åˆ°`=([^;]*)`è¿™ä¸€æ­¥ã€‚

3. æœ€åè·å–åˆ°çš„`match`å…¶å®æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º4çš„æ•°ç»„ã€‚æ¯”å¦‚ï¼š

```javascript
[
  "username=lindaidai;",
  "",
  "lindaidai",
  ";"
]
```

- ç¬¬0é¡¹ï¼šå…¨é‡
- ç¬¬1é¡¹ï¼šå¼€å¤´
- ç¬¬2é¡¹ï¼šä¸­é—´çš„å€¼
- ç¬¬3é¡¹ï¼šç»“å°¾

æ‰€ä»¥æˆ‘ä»¬æ˜¯è¦æ‹¿ç¬¬2é¡¹`match[2]`çš„å€¼ã€‚

4. ä¸ºäº†é˜²æ­¢è·å–åˆ°çš„å€¼æ˜¯`%xxx`è¿™æ ·çš„å­—ç¬¦åºåˆ—ï¼Œéœ€è¦ç”¨`unescape()`æ–¹æ³•è§£ç ã€‚

### ç”¨ä¸€ä¸ªæ­£åˆ™æå–å­—ç¬¦ä¸²ä¸­æ‰€æœ‰`""`é‡Œå†…å®¹

```javascript
 // å¦‚æœåªæ˜¯ç®€å•çš„æ²¡æœ‰å¾ªç¯éå†çš„è¯ï¼Œå°±åªèƒ½æ‹¿åˆ°ä¸€ä¸ªï¼š
 function collectGroup (str) {
  let regExp = /"([^"]*)"/g;
  let match = regExp.exec(str); // [""foo"", "foo"]
  return match[1]; // "foo"
}
var str = `"foo" and "bar" and "baz"`
console.log(collectGroup(str)) // "foo"
```

```javascript
// ç¬¬ä¸€ç§æ–¹æ¡ˆï¼šä½¿ç”¨whileå¾ªç¯éå†
 function collectGroup (str) {
  let regExp = /"([^"]*)"/g;
  const matches = [];
  while (true) {
    let match = regExp.exec(str)
    if (match === null) break;
    matches.push(match[1])
  }
  return matches
}
var str = `"foo" and "bar" and "baz"`
console.log(collectGroup(str))
```

```javascript
// ç¬¬äºŒç§æ–¹æ¡ˆï¼šä½¿ç”¨ES10çš„matchAll()
function collectGroup (str) {
  let regExp = /"([^"]*)"/g;
  const matches = []
  for (const match of str.matchAll(regExp)) {
    matches.push(match[1])
  }
  return matches
}
var str = `"foo" and "bar" and "baz"`
console.log(collectGroup(str))
```

### å®ç°sum(1,2,3)==sum(1)(2)(3)

```javascript
function sum(...args){
  function currySum(...rest){
    args.push(...rest)
    return currySum
  }
  currySum.toString= function(){ 
    return args.reduce((result,cur)=>{
      return result + cur
    })
  }
  currySum.toNumber= function(){ 
    return args.reduce((result,cur)=>{
      return result + cur
    })
  }
  return currySum
}
```

### å®ç°ä¸€ä¸ªpadStart()æˆ–padEnd()çš„polyfill

`String.prototype.padStart` å’Œ `String.prototype.padEnd`æ˜¯`ES8`ä¸­æ–°å¢çš„æ–¹æ³•ï¼Œå…è®¸å°†ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²æ·»åŠ åˆ°åŸå§‹å­—ç¬¦ä¸²çš„å¼€å¤´æˆ–ç»“å°¾ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸‹ä½¿ç”¨è¯­æ³•ï¼š

```javascript
String.padStart(targetLength,[padString])
```

ç”¨æ³•ï¼š

```javascript
'x'.padStart(4, 'ab') // 'abax'
'x'.padEnd(5, 'ab') // 'xabab'

// 1. è‹¥æ˜¯è¾“å…¥çš„ç›®æ ‡é•¿åº¦å°äºå­—ç¬¦ä¸²åŸæœ¬çš„é•¿åº¦åˆ™è¿”å›å­—ç¬¦ä¸²æœ¬èº«
'xxx'.padStart(2, 's') // 'xxx'

// 2. ç¬¬äºŒä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¸º " "ï¼Œé•¿åº¦æ˜¯ä¸º1çš„
// 3. è€Œæ­¤å‚æ•°å¯èƒ½æ˜¯ä¸ªä¸ç¡®å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œè‹¥æ˜¯è¦å¡«å……çš„å†…å®¹è¾¾åˆ°äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™å°†ä¸è¦çš„éƒ¨åˆ†æˆªå–
'xxx'.padStart(5, 'sss') // ssxxx

// 4. å¯ç”¨æ¥å¤„ç†æ—¥æœŸã€é‡‘é¢æ ¼å¼åŒ–é—®é¢˜
'12'.padStart(10, 'YYYY-MM-DD') // "YYYY-MM-12"
'09-12'.padStart(10, 'YYYY-MM-DD') // "YYYY-09-12"
```

polypillå®ç°ï¼š

```javascript
String.prototype.myPadStart = function (targetLen, padString = " ") {
  if (!targetLen) {
    throw new Error('è¯·è¾“å…¥éœ€è¦å¡«å……åˆ°çš„é•¿åº¦');
  }
  let originStr = String(this); // è·å–åˆ°è°ƒç”¨çš„å­—ç¬¦ä¸², å› ä¸ºthisåŸæœ¬æ˜¯String{}ï¼Œæ‰€ä»¥éœ€è¦ç”¨Stringè½¬ä¸ºå­—ç¬¦ä¸²
  let originLen = originStr.length; // è°ƒç”¨çš„å­—ç¬¦ä¸²åŸæœ¬çš„é•¿åº¦
  if (originLen >= targetLen) return originStr; // è‹¥æ˜¯ åŸæœ¬ > ç›®æ ‡ åˆ™è¿”å›åŸæœ¬å­—ç¬¦ä¸²
  let diffNum = targetLen - originLen; // 10 - 6 // å·®å€¼
  for (let i = 0; i < diffNum; i++) { // è¦æ·»åŠ å‡ ä¸ªæˆå‘˜
    for (let j = 0; j < padString.length; j++) { // è¾“å…¥çš„padStringçš„é•¿åº¦å¯èƒ½ä¸ä¸º1
      if (originStr.length === targetLen) break; // åˆ¤æ–­æ¯ä¸€æ¬¡æ·»åŠ ä¹‹åæ˜¯å¦åˆ°äº†ç›®æ ‡é•¿åº¦
      originStr = `${padString[j]}${originStr}`;
    }
    if (originStr.length === targetLen) break;
  }
  return originStr;
}
console.log('xxx'.myPadStart(16))
console.log('xxx'.padStart(16))
```

è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè€Œ`padEnd`çš„å®ç°å’Œå®ƒä¸€æ ·ï¼Œåªéœ€è¦æŠŠç¬¬äºŒå±‚`for`å¾ªç¯é‡Œçš„`${padString}${orignStr}`æ¢ä¸‹ä½ç½®å°±å¯ä»¥äº†ã€‚

### ä¸€å¥è¯æè¿°ä¸€ä¸‹this

æŒ‡å‘æœ€åè°ƒç”¨å‡½æ•°çš„é‚£ä¸ªå¯¹è±¡ï¼Œæ˜¯å‡½æ•°è¿è¡Œæ—¶å†…éƒ¨è‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨

### apply/call/bindçš„ç›¸åŒå’Œä¸åŒ

### æè¿°ä¸€ä¸‹EventLoopçš„æ‰§è¡Œè¿‡ç¨‹

- ä¸€å¼€å§‹æ•´ä¸ªè„šæœ¬ä½œä¸ºä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œ

- æ‰§è¡Œè¿‡ç¨‹ä¸­åŒæ­¥ä»£ç ç›´æ¥æ‰§è¡Œï¼Œå®ä»»åŠ¡è¿›å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡è¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—

- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œå‡ºé˜Ÿï¼Œæ£€æŸ¥å¾®ä»»åŠ¡åˆ—è¡¨ï¼Œæœ‰åˆ™ä¾æ¬¡æ‰§è¡Œï¼Œç›´åˆ°å…¨éƒ¨æ‰§è¡Œå®Œ

- æ‰§è¡Œæµè§ˆå™¨UIçº¿ç¨‹çš„æ¸²æŸ“å·¥ä½œ

- æ£€æŸ¥æ˜¯å¦æœ‰`Web Worker`ä»»åŠ¡ï¼Œæœ‰åˆ™æ‰§è¡Œ

- æ‰§è¡Œå®Œæœ¬è½®çš„å®ä»»åŠ¡ï¼Œå›åˆ°2ï¼Œä¾æ­¤å¾ªç¯ï¼Œç›´åˆ°å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—éƒ½ä¸ºç©º

ï¼ˆçœ‹è¿™é‡Œï¼š<https://juejin.im/post/5e58c618e51d4526ed66b5cf#heading-1>ï¼‰

### ä»‹ç»ä¸€ä¸‹Promiseä»¥åŠå®ƒçš„ä¸€äº›æ–¹æ³•

è¿™é“é¢˜æˆ‘ä¼šå…ˆå¤§æ¦‚ä»‹ç»ä¸€ä¸‹`Promise`ï¼š

[`Promise`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise) æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–è€…å¤±è´¥ã€‚ç”±äºå®ƒçš„`then`æ–¹æ³•å’Œ`catchã€finally`æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„`Promise`æ‰€ä»¥å¯ä»¥å…è®¸æˆ‘ä»¬é“¾å¼è°ƒç”¨ï¼Œè§£å†³äº†ä¼ ç»Ÿçš„å›è°ƒåœ°ç‹±é—®é¢˜ã€‚

å†è¯´ä¸€ä¸‹`then`ä»¥åŠ`catch`æ–¹æ³•ï¼š

(æ­¤å¤„æˆ‘æ˜¯ç›´æ¥æ‹¿æˆ‘ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« [ã€Š45é“Promiseé¢˜ã€‹](https://juejin.im/post/5e58c618e51d4526ed66b5cf#heading-16)é‚£é‡Œçš„æ€»ç»“)

1. `Promise`çš„çŠ¶æ€ä¸€ç»æ”¹å˜å°±ä¸èƒ½å†æ”¹å˜ã€‚(è§3.1)
2. `.then`å’Œ`.catch`éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„`Promise`ã€‚(ä¸Šé¢çš„ğŸ‘†1.4è¯æ˜äº†)
3. `catch`ä¸ç®¡è¢«è¿æ¥åˆ°å“ªé‡Œï¼Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•æ‰è¿‡çš„é”™è¯¯ã€‚(è§3.2)
4. åœ¨`Promise`ä¸­ï¼Œè¿”å›ä»»æ„ä¸€ä¸ªé `promise` çš„å€¼éƒ½ä¼šè¢«åŒ…è£¹æˆ `promise` å¯¹è±¡ï¼Œä¾‹å¦‚`return 2`ä¼šè¢«åŒ…è£…ä¸º`return Promise.resolve(2)`ã€‚
5. `Promise` çš„ `.then` æˆ–è€… `.catch` å¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡, ä½†å¦‚æœ`Promise`å†…éƒ¨çš„çŠ¶æ€ä¸€ç»æ”¹å˜ï¼Œå¹¶ä¸”æœ‰äº†ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆåç»­æ¯æ¬¡è°ƒç”¨`.then`æˆ–è€…`.catch`çš„æ—¶å€™éƒ½ä¼šç›´æ¥æ‹¿åˆ°è¯¥å€¼ã€‚(è§3.5)
6. `.then` æˆ–è€… `.catch` ä¸­ `return` ä¸€ä¸ª `error` å¯¹è±¡å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ‰€ä»¥ä¸ä¼šè¢«åç»­çš„ `.catch` æ•è·ã€‚(è§3.6)
7. `.then` æˆ– `.catch` è¿”å›çš„å€¼ä¸èƒ½æ˜¯ promise æœ¬èº«ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚(è§3.7)
8. `.then` æˆ–è€… `.catch` çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ ã€‚(è§3.8)
9. `.then`æ–¹æ³•æ˜¯èƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¤„ç†æˆåŠŸçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¤„ç†å¤±è´¥çš„å‡½æ•°ï¼Œå†æŸäº›æ—¶å€™ä½ å¯ä»¥è®¤ä¸º`catch`æ˜¯`.then`ç¬¬äºŒä¸ªå‚æ•°çš„ç®€ä¾¿å†™æ³•ã€‚(è§3.9)
10. `.finally`æ–¹æ³•ä¹Ÿæ˜¯è¿”å›ä¸€ä¸ª`Promise`ï¼Œä»–åœ¨`Promise`ç»“æŸçš„æ—¶å€™ï¼Œæ— è®ºç»“æœä¸º`resolved`è¿˜æ˜¯`rejected`ï¼Œéƒ½ä¼šæ‰§è¡Œé‡Œé¢çš„å›è°ƒå‡½æ•°ã€‚

å¦å¤–ä¹Ÿå¯ä»¥è¯´ä¸€ä¸‹`finally`æ–¹æ³•ï¼š

1. `.finally()`æ–¹æ³•ä¸ç®¡`Promise`å¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ

2. `.finally()`æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨`.finally()`å‡½æ•°ä¸­æ˜¯æ²¡æ³•çŸ¥é“`Promise`æœ€ç»ˆçš„çŠ¶æ€æ˜¯`resolved`è¿˜æ˜¯`rejected`çš„

3. å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ª**ä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼**ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„`Promise`å¯¹è±¡ã€‚

æœ€åå¯ä»¥è¯´ä¸€ä¸‹`all`ä»¥åŠ`race`æ–¹æ³•ï¼š

- `Promise.all()`çš„ä½œç”¨æ˜¯æ¥æ”¶ä¸€ç»„å¼‚æ­¥ä»»åŠ¡ï¼Œç„¶åå¹¶è¡Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåæ‰æ‰§è¡Œå›è°ƒã€‚
- `.race()`çš„ä½œç”¨ä¹Ÿæ˜¯æ¥æ”¶ä¸€ç»„å¼‚æ­¥ä»»åŠ¡ï¼Œç„¶åå¹¶è¡Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œåªä¿ç•™å–ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œæˆçš„å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå…¶ä»–çš„æ–¹æ³•ä»åœ¨æ‰§è¡Œï¼Œä¸è¿‡æ‰§è¡Œç»“æœä¼šè¢«æŠ›å¼ƒã€‚
- `Promise.all().then()`ç»“æœä¸­æ•°ç»„çš„é¡ºåºå’Œ`Promise.all()`æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´ã€‚
- `allå’Œrace`ä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢«`then`çš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„`catch`æ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚

### Promise.allä¸­å¦‚æœæœ‰ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸äº†ä¼šå¦‚ä½•å¤„ç†

è¿™ä¸ªï¼Œåœ¨ä¸Šä¸€é¢˜å·²ç»è¯´åˆ°äº†ï¼š

`allå’Œrace`ä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢«`then`çš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„`catch`æ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚

### Promiseä¸ºä»€ä¹ˆèƒ½é“¾å¼è°ƒç”¨

ç”±äºå®ƒçš„`then`æ–¹æ³•å’Œ`catchã€finally`æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª**æ–°çš„`Promise`**æ‰€ä»¥å¯ä»¥å…è®¸æˆ‘ä»¬é“¾å¼è°ƒç”¨

### å…³äºasync/awaitä»¥ä¸‹ä»£ç åˆ†åˆ«æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Ÿ

```javascript
function wait (delay) {
  return new Promise(r => {
    setTimeout(() => {
      r('execute', console.log('execute'))
    }, delay)
  })
}
// async function series () { // 1
//   await wait(500);
//   await wait(500);
//   console.log('done')
// }
async function series () { // 2
  const wait1 = wait(500)
  const wait2 = wait(500)
  await wait1;
  await wait2;
  console.log('done')
}
series()
```

- ç¬¬ä¸€ä¸ª`series()`:

```javascript
// 1. 500mså
'execute'
// 2. 500mså
'execute' å’Œ 'done' ä¸€èµ·æ‰“å°
```

- ç¬¬äºŒä¸ª`series`:

```javascript
// 500msååŒæ—¶æ‰“å°å‡º
'execute'
'execute'
'done'
```

å‚è€ƒï¼š<https://developers.google.com/web/fundamentals/primers/async-functions>

### è®¾è®¡ä¸€ä¸ªæ–¹æ³•æå–å¯¹è±¡ä¸­æ‰€æœ‰valueå¤§äº2çš„é”®å€¼å¯¹å¹¶è¿”å›æœ€æ–°çš„å¯¹è±¡

å®ç°ï¼š

```javascript
var obj = { a: 1, b: 3, c: 4 }
foo(obj) // { b: 3, c: 4 }
```

æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæä¾›ä¸€ç§æ¯”è¾ƒç®€æ´çš„å†™æ³•ï¼Œç”¨åˆ°äº†`ES10`çš„`Object.fromEntries()`ï¼š

```javascript
var obj = { a: 1, b: 3, c: 4 }
function foo (obj) {
  return Object.fromEntries(
    Object.entries(obj).filter(([key, value]) => value > 2)
  )
}
var obj2 = foo(obj) // { b: 3, c: 4 }
console.log(obj2)
```

```javascript
// ES8ä¸­ Object.entries()çš„ä½œç”¨ï¼š
var obj = { a: 1, b: 2 }
var entries = Object.entries(obj); // [['a', 1], ['b', 2]]
// ES10ä¸­ Object.fromEntries()çš„ä½œç”¨ï¼š
Object.fromEntries(entries); // { a: 1, b: 2 }
```

### å»é™¤å­—ç¬¦ä¸²é¦–ä½ç©ºæ ¼

ç¬¬ä¸€ç§ï¼šæ­£åˆ™åŒ¹é…é¦–ä½ç©ºæ ¼å¹¶å»é™¤ï¼š

```javascript
function trim (str) {
  return str.replace(/(^\s+)|(\s+$)/g, '')
}
console.log(trim('  11  ')) // '11'
console.log(trim('  1 1  ')) // '1 1'
```

ç¬¬äºŒç§ï¼šä½¿ç”¨`ES10`ä¸­çš„`trimStart`å’Œ`trimEnd`ï¼š

```javascript
function trim (str) {
  str = str.trimStart()
  return str.trimEnd()
}
console.log(trim('  11  ')) // '11'
console.log(trim('  1 1  ')) // '1 1'
```

### HTTPå’ŒTCPçš„ä¸åŒ

HTTPçš„è´£ä»»æ˜¯å»å®šä¹‰æ•°æ®ï¼Œåœ¨ä¸¤å°è®¡ç®—æœºç›¸äº’ä¼ é€’ä¿¡æ¯æ—¶ï¼ŒHTTPè§„å®šäº†æ¯æ®µæ•°æ®ä»¥ä»€ä¹ˆå½¢å¼è¡¨è¾¾æ‰æ˜¯èƒ½å¤Ÿè¢«å¦å¤–ä¸€å°è®¡ç®—æœºç†è§£ã€‚

è€ŒTCPæ‰€è¦è§„å®šçš„æ˜¯æ•°æ®åº”è¯¥æ€ä¹ˆä¼ è¾“æ‰èƒ½ç¨³å®šä¸”é«˜æ•ˆçš„ä¼ é€’ä¸è®¡ç®—æœºä¹‹é—´ã€‚

(è¿˜å¯ä»¥å†æ‰©å±•)

### TCPå’ŒUDPçš„åŒºåˆ«

1. TCPæ˜¯ä¸€ä¸ªé¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚åè®®ã€‚
2. UDPæ˜¯ä¸€ä¸ªé¢å‘æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ã€‚

TCPä¸ºä»€ä¹ˆå¯é ï¼Œæ˜¯å› ä¸ºå®ƒæœ‰ä¸‰æ¬¡æ¡æ‰‹æ¥ä¿è¯åŒæ–¹éƒ½æœ‰æ¥å—å’Œå‘é€æ•°æ®çš„èƒ½åŠ›ã€‚

å­—èŠ‚æµæœåŠ¡ï¼šå°†å¤§å—æ•°æ®åˆ†å‰²ä¸ºä»¥æŠ¥æ–‡æ®µä¸ºå•ä½çš„æ•°æ®åŒ…è¿›è¡Œç®¡ç†

### XSSæ”»å‡»

XSS(Cross Site Script)è·¨ç«™è„šæœ¬æ”»å‡»ã€‚æŒ‡çš„æ˜¯æ”»å‡»è€…å‘ç½‘é¡µæ³¨å…¥æ¶æ„çš„å®¢æˆ·ç«¯ä»£ç ï¼Œé€šè¿‡æ¶æ„çš„è„šæœ¬å¯¹å®¢æˆ·ç«¯ç½‘é¡µè¿›è¡Œç¯¡æ”¹ï¼Œä»è€Œåœ¨ç”¨æˆ·æµè§ˆç½‘é¡µæ—¶ï¼Œå¯¹ç”¨æˆ·æµè§ˆå™¨è¿›è¡Œæ§åˆ¶æˆ–è€…è·å–ç”¨æˆ·éšç§æ•°æ®çš„ä¸€ç§æ”»å‡»æ–¹å¼ã€‚

ä¸»è¦æ˜¯åˆ†ä¸ºä¸‰ç§ï¼š

**å­˜å‚¨å‹**ï¼šå³æ”»å‡»è¢«å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå¸¸è§çš„æ˜¯åœ¨è¯„è®ºåŒºæ’å…¥æ”»å‡»è„šæœ¬ï¼Œå¦‚æœè„šæœ¬è¢«å‚¨å­˜åˆ°æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çœ‹è§å¯¹åº”è¯„è®ºçš„ç”¨æˆ·éƒ½ä¼šå—åˆ°æ”»å‡»ã€‚

**åå°„å‹**ï¼šæ”»å‡»è€…å°†è„šæœ¬æ··åœ¨URLé‡Œï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°URLå°†æ¶æ„ä»£ç å½“åšå‚æ•°å–å‡ºå¹¶æ‹¼æ¥åœ¨HTMLé‡Œè¿”å›ï¼Œæµè§ˆå™¨è§£ææ­¤HTMLåå³æ‰§è¡Œæ¶æ„ä»£ç 

**DOMå‹**ï¼šå°†æ”»å‡»è„šæœ¬å†™åœ¨URLä¸­ï¼Œè¯±å¯¼ç”¨æˆ·ç‚¹å‡»è¯¥URLï¼Œå¦‚æœURLè¢«è§£æï¼Œé‚£ä¹ˆæ”»å‡»è„šæœ¬å°±ä¼šè¢«è¿è¡Œã€‚å’Œå‰ä¸¤è€…çš„å·®åˆ«ä¸»è¦åœ¨äºDOMå‹æ”»å‡»ä¸ç»è¿‡æœåŠ¡ç«¯

### å¦‚ä½•é˜²å¾¡XSSæ”»å‡»

- **è¾“å…¥æ£€æŸ¥**ï¼šå¯¹è¾“å…¥å†…å®¹ä¸­çš„`script`å’Œ`<iframe>`ç­‰æ ‡ç­¾è¿›è¡Œè½¬ä¹‰æˆ–è€…è¿‡æ»¤
- **è®¾ç½®httpOnly**ï¼šå¾ˆå¤šXSSæ”»å‡»ç›®æ ‡éƒ½æ˜¯çªƒå–ç”¨æˆ·cookieä¼ªé€ èº«ä»½è®¤è¯ï¼Œè®¾ç½®æ­¤å±æ€§å¯é˜²æ­¢JSè·å–cookie
- **å¼€å¯CSP**ï¼Œå³å¼€å¯ç™½åå•ï¼Œå¯é˜»æ­¢ç™½åå•ä»¥å¤–çš„èµ„æºåŠ è½½å’Œè¿è¡Œ

### CSRFæ”»å‡»

CSRFæ”»å‡»(Cross-site request forgery)è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚æ˜¯ä¸€ç§åŠ«æŒå—ä¿¡ä»»ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€éé¢„æœŸè¯·æ±‚çš„æ”»å‡»æ–¹å¼ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æ”»å‡»è€…å€ŸåŠ©å—å®³è€…çš„ Cookie éª—å–æœåŠ¡å™¨çš„ä¿¡ä»»ï¼Œä½†æ˜¯å®ƒå¹¶ä¸èƒ½æ‹¿åˆ°Cookieï¼Œä¹Ÿçœ‹ä¸åˆ°Cookieçš„å†…å®¹ï¼Œå®ƒèƒ½åšçš„å°±æ˜¯ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åæ‰§è¡Œè¯·æ±‚ä¸­æ‰€æè¿°çš„å‘½ä»¤ï¼Œä»¥æ­¤æ¥æ”¹å˜æœåŠ¡å™¨ä¸­çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å¹¶ä¸èƒ½çªƒå–æœåŠ¡å™¨ä¸­çš„æ•°æ®ã€‚

é˜²å¾¡ä¸»è¦æœ‰ä¸‰ç§ï¼š

éªŒè¯`Token`ï¼šæµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ªtokenï¼Œæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦åŒæ—¶å¸¦ä¸Štokenå’Œcookieæ‰ä¼šè¢«è®¤ä¸ºæ˜¯åˆæ³•è¯·æ±‚

éªŒè¯`Referer`ï¼šé€šè¿‡éªŒè¯è¯·æ±‚å¤´çš„Refereræ¥éªŒè¯æ¥æºç«™ç‚¹ï¼Œä½†è¯·æ±‚å¤´å¾ˆå®¹æ˜“ä¼ªé€ 

è®¾ç½®`SameSite`ï¼šè®¾ç½®cookieçš„SameSiteï¼Œå¯ä»¥è®©cookieä¸éšè·¨åŸŸè¯·æ±‚å‘å‡ºï¼Œä½†æµè§ˆå™¨å…¼å®¹ä¸ä¸€

### ç‚¹å‡»åŠ«æŒ

- è¯±ä½¿ç”¨æˆ·ç‚¹å‡»çœ‹ä¼¼æ— å®³çš„æŒ‰é’®ï¼ˆå®åˆ™ç‚¹å‡»äº†é€æ˜ iframe ä¸­çš„æŒ‰é’®ï¼‰.
- ç›‘å¬é¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œè®©å±é™©æŒ‰é’®å§‹ç»ˆåœ¨é¼ æ ‡ä¸‹æ–¹.
- ä½¿ç”¨ HTML5 æ‹–æ‹½æŠ€æœ¯æ‰§è¡Œæ•æ„Ÿæ“ä½œï¼ˆä¾‹å¦‚ deploy keyï¼‰.

é¢„é˜²ç­–ç•¥ï¼š

1. æœåŠ¡ç«¯æ·»åŠ  X-Frame-Options å“åº”å¤´,è¿™ä¸ª HTTP å“åº”å¤´æ˜¯ä¸ºäº†é˜²å¾¡ç”¨ iframe åµŒå¥—çš„ç‚¹å‡»åŠ«æŒæ”»å‡»ã€‚ è¿™æ ·æµè§ˆå™¨å°±ä¼šé˜»æ­¢åµŒå…¥ç½‘é¡µçš„æ¸²æŸ“ã€‚
2. JS åˆ¤æ–­é¡¶å±‚è§†å£çš„åŸŸåæ˜¯ä¸æ˜¯å’Œæœ¬é¡µé¢çš„åŸŸåä¸€è‡´ï¼Œä¸ä¸€è‡´åˆ™ä¸å…è®¸æ“ä½œï¼Œ`top.location.hostname === self.location.hostname`ï¼›
3. æ•æ„Ÿæ“ä½œä½¿ç”¨æ›´å¤æ‚çš„æ­¥éª¤ï¼ˆéªŒè¯ç ã€è¾“å…¥é¡¹ç›®åç§°ä»¥åˆ é™¤ï¼‰ã€‚

(è¿™ä¸ªæ¥æºäºLuckyWinty: <http://www.imooc.com/article/295400>)

### webpackä¸­çš„loaderå’Œpluginæœ‰ä»€ä¹ˆåŒºåˆ«

### ä½¿ç”¨babel-loaderä¼šæœ‰å“ªäº›é—®é¢˜ï¼Ÿå¯ä»¥æ€æ ·ä¼˜åŒ–ï¼Ÿ

1. ä¼šä½¿å¾—ç¼–è¯‘å¾ˆæ…¢ã€‚è§£å†³åŠæ³•æ˜¯å¯ä»¥åœ¨`webpack`çš„`babel-loader`é…ç½®ä¸­ä½¿ç”¨`exclude`è¿™ä¸ªå¯é€‰é¡¹æ¥å»é™¤ä¸€äº›ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶å¤¹(ä¾‹å¦‚`node_modules`å’Œ`bower_components`)ï¼Œå¦ä¸€ç§å¯ä»¥è®¾ç½®`cacheDirectory`é€‰é¡¹ä¸º`true`, å¼€å¯ç¼“å­˜, è½¬è¯‘çš„ç»“æœå°†ä¼šç¼“å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­, è¿™æ ·ä½¿`babel-loader`è‡³å°‘æé€Ÿä¸¤å€(ä»£ç é‡è¶Šå¤šæ•ˆæœåº”è¯¥è¶Šæ˜æ˜¾)ã€‚
2. `babel-loader`ä½¿å¾—æ‰“åŒ…æ–‡ä»¶ä½“ç§¯è¿‡å¤§ã€‚Babel å¯¹ä¸€äº›å…¬å…±æ–¹æ³•ä½¿ç”¨äº†éå¸¸å°çš„è¾…åŠ©ä»£ç , æ¯”å¦‚ `_extend`.é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«æ·»åŠ åˆ°æ¯ä¸€ä¸ªéœ€è¦å®ƒçš„æ–‡ä»¶ä¸­, æ‰€ä»¥ä¼šå¯¼è‡´æ‰“åŒ…æ–‡ä»¶ä½“ç§¯è¿‡å¤§.è§£å†³åŠæ³•: å¼•å…¥`babel runtime`ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—, æ¥é¿å…é‡å¤ã€‚ä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨`@babel/plugin-transform-runtime`å’Œ`babel-runtime`ã€‚

### Vue3.0ç›¸å¯¹äºVue2.xæœ‰å“ªäº›ä¸åŒï¼Ÿ

**performance**

é¦–å…ˆåœ¨æ€§èƒ½(performance)ä¸Šæœ‰äº†æ›´å¤šçš„ä¼˜åŒ–ï¼Œä¸€æ–¹é¢è¡¨ç°åœ¨`virtual dom`çš„ç”Ÿæˆä¸Šæ›´å¿«äº†ï¼Œå¦å¤–åœ¨åº•å±‚è¿˜åšäº†ä¸€äº›ç›‘å¬çš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯äº‹ä»¶åœ¨è¢«åˆ›å»ºçš„æ—¶å€™ä¼šè¢«æ¨è¿›ä¸€ä¸ªç¼“å­˜ä¸­ï¼Œåç»­æ²¡æœ‰æ”¹å˜ä¼šç›´æ¥å–ç¼“å­˜ã€‚

**tree-shaking**

tree-shakingå®ƒè¡¨ç¤ºçš„æ˜¯åœ¨æ‰“åŒ…çš„æ—¶å€™ä¼šå»é™¤ä¸€äº›æ— ç”¨çš„ä»£ç ã€‚è€Œåœ¨Vue3ä¸­å¯¹å®ƒçš„æ”¯æŒæ›´åŠ å‹å¥½äº†ï¼Œä¾‹å¦‚åƒtransitionã€v-modelã€computedç­‰åŠŸèƒ½æ²¡æœ‰ç”¨åˆ°çš„è¯ï¼Œé‚£ä¹ˆæœ€åæ‰“åŒ…äº§ç”Ÿçš„ä»£ç å°±ä¼šå°†å®ƒä»¬å»é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ çš„Vueé¡¹ç›®åªå†™äº†ä¸€ä¸ªHello Wordçš„è¯ï¼Œé‚£ä¹ˆæœ€åæ‰“åŒ…çš„ä»£ç ä¸­å°±åªæœ‰ä¸€äº›æ ¸å¿ƒçš„ä»£ç ï¼Œå¦‚æ›´æ–°ç®—æ³•ã€å“åº”å¼ç­‰ï¼Œæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å¯èƒ½å°±åªæœ‰13.5kbã€‚

**Fragments**

ç¢ç‰‡(Fragments)ï¼ŒåŸæœ¬åœ¨Vue2.xä¸­æ¯ä¸ªtemplateä¸‹åªèƒ½å…è®¸æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨Vue3ä¸­å®ƒå¯ä»¥å…è®¸ä½ æœ‰å¤šä¸ªï¼Œç”¨å°¤å¤§å¤§çš„è¯æ¥è¯´å°±æ˜¯ä¼šå°†è¿™äº›å†…å®¹è‡ªåŠ¨å˜ä¸ºä¸€ä¸ªç¢ç‰‡ã€‚

**TS**

å†è€…å°±æ˜¯å¯¹TSçš„æ”¯æŒåº¦å¾ˆå¥½ã€‚è™½ç„¶Vue3æœ¬æ¥å°±æ˜¯ç”¨TSå†™çš„ï¼Œä½†æ˜¯ä¸ä¸€å®šè¦ç”¨TSã€‚å¦å¤–å®ƒä¹Ÿæ”¯æŒClass Componentï¼Œä¸è¿‡ä¸æ˜¯ç¬¬ä¸€æ¨èã€‚

**Component API**

è¯­æ³•ä¸Šï¼Œå¯¹æ¨¡ç‰ˆè¯­æ³•æ˜¯é›¶æ”¹å˜çš„ã€‚åªä¸è¿‡æ›´åŠ æ¨èç”¨Component APIæ¥å†™JSéƒ¨åˆ†ã€‚Component APIå®ƒå¹¶ä¸æ˜¯è¯­æ³•ï¼Œè€Œæ˜¯æ–°å¢çš„APIã€‚å®ƒå¸¦æ¥çš„å¥½å¤„ä¸€ä¸ªæ˜¯é€»è¾‘é‡ç”¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŠŠä¸€äº›åŠŸèƒ½çš„éƒ¨åˆ†æŠ½ç¦»å‡ºæ¥ã€‚å¦ä¸€ä¸ªå®ƒç›¸å¯¹äºoptionsæ¥è¯´æ›´åŠ é›†ä¸­ï¼Œç”¨optionsæ¥å†™ä»£ç æƒ³è¦è¿½å¯»ä¸€ä¸ªå˜é‡çš„å˜åŒ–æ¯”è¾ƒéº»çƒ¦ã€‚

**å…³äºå…¼å®¹æ€§**

ç›®å‰çš„Vue3.betaç‰ˆæœ¬æ˜¯ä¸æ”¯æŒIE11çš„ï¼Œå› ä¸ºæ ¸å¿ƒçš„å“åº”å¼åŸç†ç”¨åˆ°äº†ES6çš„Proxyï¼Œä½†æ˜¯ä»¥åä¼šå»å…¼å®¹IE11ã€‚åé¢æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªVueé¡¹ç›®çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„ç‰ˆæœ¬ï¼Œæ”¯æŒIE11å’Œä¸æ”¯æŒIE11çš„ã€‚

**ä»€ä¹ˆæ—¶å€™èƒ½ä½¿ç”¨**

ç°åœ¨çš„betaç‰ˆæœ¬å…¶å®å·²ç»å¯ä»¥ç”¨äº†ï¼Œå¯¹äºä¸€äº›æ–°çš„å°çš„é¡¹ç›®å¯ä»¥è¯•è¯•æ°´ï¼Œè¿™ä¸ªå¯ä»¥è‡ªå·±è¯„ä¼°ã€‚æ­£å¼èƒ½å¤ŸæŠ•å…¥åˆ°ç”Ÿäº§ä½¿ç”¨ä¸­å¯èƒ½è¦ç­‰åˆ°å¹´ä¸­ (ç»ˆï¼Ÿ)ã€‚

### Vueä¸­hashæ¨¡å¼å’Œhistoryæ¨¡å¼çš„åŒºåˆ«

- æœ€æ˜æ˜¾çš„æ˜¯åœ¨æ˜¾ç¤ºä¸Šï¼Œ`hash`æ¨¡å¼çš„`URL`ä¸­ä¼šå¤¹æ‚ç€`#`å·ï¼Œè€Œ`history`æ²¡æœ‰ã€‚
- `Vue`åº•å±‚å¯¹å®ƒä»¬çš„å®ç°æ–¹å¼ä¸åŒã€‚`hash`æ¨¡å¼æ˜¯ä¾é `onhashchange`äº‹ä»¶(ç›‘å¬`location.hash`çš„æ”¹å˜)ï¼Œè€Œ`history`æ¨¡å¼æ˜¯ä¸»è¦æ˜¯ä¾é çš„`HTML5 history`ä¸­æ–°å¢çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œ`pushState()`å¯ä»¥æ”¹å˜`url`åœ°å€ä¸”ä¸ä¼šå‘é€è¯·æ±‚ï¼Œ`replaceState()`å¯ä»¥è¯»å–å†å²è®°å½•æ ˆ,è¿˜å¯ä»¥å¯¹æµè§ˆå™¨è®°å½•è¿›è¡Œä¿®æ”¹ã€‚
- å½“çœŸæ­£éœ€è¦é€šè¿‡`URL`å‘åç«¯å‘é€`HTTP`è¯·æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚å¸¸è§çš„ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥`URL`åå›è½¦ï¼Œæˆ–è€…æ˜¯åˆ·æ–°(é‡å¯)æµè§ˆå™¨ï¼Œè¿™æ—¶å€™`history`æ¨¡å¼éœ€è¦åç«¯çš„æ”¯æŒã€‚å› ä¸º`history`æ¨¡å¼ä¸‹ï¼Œå‰ç«¯çš„`URL`å¿…é¡»å’Œå®é™…å‘åç«¯å‘é€è¯·æ±‚çš„`URL`ä¸€è‡´ï¼Œä¾‹å¦‚æœ‰ä¸€ä¸ª`URL`æ˜¯å¸¦æœ‰è·¯å¾„`path`çš„(ä¾‹å¦‚`www.lindaidai.wang/blogs/id`)ï¼Œå¦‚æœåç«¯æ²¡æœ‰å¯¹è¿™ä¸ªè·¯å¾„åšå¤„ç†çš„è¯ï¼Œå°±ä¼šè¿”å›`404`é”™è¯¯ã€‚æ‰€ä»¥éœ€è¦åç«¯å¢åŠ ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„å€™é€‰èµ„æºï¼Œä¸€èˆ¬ä¼šé…åˆå‰ç«¯ç»™å‡ºçš„ä¸€ä¸ª`404`é¡µé¢ã€‚

`hash:`

```javascript
window.onhashchange = function(event){
  // location.hashè·å–åˆ°çš„æ˜¯åŒ…æ‹¬#å·çš„ï¼Œå¦‚"#heading-3"
  // æ‰€ä»¥å¯ä»¥æˆªå–ä¸€ä¸‹
 let hash = location.hash.slice(1);
}
```

### Vueç»„ä»¶å†…çš„å¯¼èˆªå®ˆå«æœ‰å“ªå‡ ä¸ªï¼Ÿ

- `beforeRouteEnter`
- `beforeRouteUpdate`
- `beforeLeave`

### beforeRouteEnterå’Œå¦å¤–ä¸¤ä¸ªæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ

`beforeRouteEnter`æ˜¯æ”¯æŒç»™`next`ä¼ é€’å‚æ•°çš„å”¯ä¸€å®ˆå«ï¼Œå› ä¸ºåœ¨è¿™ä¸ªè·¯ç”±å®ˆå«ä¸­è¿˜**ä¸èƒ½è®¿é—®this**ï¼Œè€Œä¸ºäº†èƒ½è®©æˆ‘ä»¬è®¿é—®ç»„ä»¶å®ä¾‹ï¼Œå¯ä»¥é€šè¿‡ä¼ ä¸€ä¸ªå›è°ƒç»™`next`ï¼š

```javascript
beforeRouteEnter(to, from, next) {
 next(vm => {
  // vm å°±æ˜¯ç»„ä»¶å®ä¾‹
 }) 
}
```

è€Œå¯¹äºå¦å¤–ä¸¤ä¸ªï¼Œ`this`å·²ç»å¯ç”¨ï¼Œæ‰€ä»¥**ä¸æ”¯æŒä¼ é€’å›è°ƒ**ï¼š

```javascript
beforeRouteUpdate (to, from, next) {
  // just use `this`
  this.name = to.params.name
  next()
}
```

ç¦»å¼€å®ˆå«`beforeRouteLeave`é€šå¸¸ç”¨æ¥ç¦æ­¢ç”¨æˆ·è¿˜æœªä¿å­˜ä¿®æ”¹ä¹‹å‰ç¦»å¼€ï¼Œå¯ä»¥é€šè¿‡`next(false)`æ¥å–æ¶ˆï¼š

```javascript
beforeRouteLeave (to, from, next) {
  const answer = window.confirm('Do you really want to leave? you have unsaved changes!')
  if (answer) {
    next()
  } else {
    next(false)
  }
}
```

### å®Œæ•´çš„å¯¼èˆªè§£ææµç¨‹

1. å¯¼èˆªè¢«è§¦å‘ã€‚
2. åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ç¦»å¼€å®ˆå«ã€‚
3. è°ƒç”¨å…¨å±€çš„ `beforeEach` å®ˆå«ã€‚
4. åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ `beforeRouteUpdate` å®ˆå« (2.2+)ã€‚
5. åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ `beforeEnter`ã€‚
6. è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚
7. åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ `beforeRouteEnter`ã€‚
8. è°ƒç”¨å…¨å±€çš„ `beforeResolve` å®ˆå« (2.5+)ã€‚
9. å¯¼èˆªè¢«ç¡®è®¤ã€‚
10. è°ƒç”¨å…¨å±€çš„ `afterEach` é’©å­ã€‚
11. è§¦å‘ DOM æ›´æ–°ã€‚
12. ç”¨åˆ›å»ºå¥½çš„å®ä¾‹è°ƒç”¨ `beforeRouteEnter` å®ˆå«ä¸­ä¼ ç»™ `next` çš„å›è°ƒå‡½æ•°ã€‚
